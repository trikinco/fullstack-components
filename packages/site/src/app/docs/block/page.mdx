import Blocks from './Blocks'
import { URL_HOST } from '@/src/utils/constants'
import { routes } from '@/src/utils/routes'

export const metadata = {
  title: 'Block - AI Generated React Components',
  description:
    'Generate React components with AI. Prompt goes in, component comes out. Easy.',
  alternates: {
    canonical: `${new URL(routes.block, URL_HOST)}`,
  },
}

# Block

Blocks are individual React components that are generated and mounted on the fly, and all you need is a `prompt`.

## `Block` Client Component

<Example className="w-full xl:w-auto xl:-mx-10 2xl:-mx-28">
  <Blocks />
</Example>

```jsx
<Block
  prompt="A navbar with a modern SVG logo, the title 'myProject' and some links. Dark bg, light text."
  fallback={<p>Creating navbar component...</p>}
/>
//... etc
```

## `useBlock` hook

`useBlock` is a utility hook that allows for access to similar features as `Block`.

```jsx
'use client'

import { useBlock } from '@trikinco/fullstack-components/client'

export default function Page() {
  const { id } = useBlock('A spinning button')

  return <div id={id}>Generating a button...</div>
}
```

## Setup

Add `block: handleBlockRequest()` to the [API handler route](/docs/get-started/#setup).

```ts title="app/api/fsutils/[...fscomponents]/route.ts"
import {
  handleFSComponents,
  handleBlockRequest,
  type FSCOptions,
} from '@trikinco/fullstack-components'

const fscOptions: FSCOptions = {
  block: handleBlockRequest({
    openAiApiKey: process.env.OPENAI_API_KEY || '',
  }),
  // Additional options and handlers...
}

const fscHandler = handleFSComponents(fscOptions)

export { fscHandler as GET, fscHandler as POST }
```

## API Reference

### Types

<TypeInfoToText
  path="handlers/block/models.d.ts"
  name="BlockOptions"
  description="Block API handler route options."
/>

<TypeInfoToText
  path="handlers/block/models.d.ts"
  name="BlockRequestBody"
  description="Block request body."
/>

<TypeInfoToText
  path="handlers/block/models.d.ts"
  name="BlockResult"
  description="Block result after processing."
/>

<TypeInfoToText
  path="chatGptService.d.ts"
  name="ChatGptCompletionResponse"
  description="The response body for `getBlock`."
/>

### Components

<TypeInfoToText path="components/Block.d.ts" name="BlockProps" />

<TypeInfoToText path="components/Block.d.ts" name="Block">

```jsx
import { Block } from '@trikinco/fullstack-components/client'
```

</TypeInfoToText>

### Hooks

<TypeInfoToText
  path="handlers/block/useBlock.d.ts"
  name="useBlock"
>

```jsx
import { useBlock } from '@trikinco/fullstack-components/client'
```

</TypeInfoToText>

### Utilities

<TypeInfoToText
  path="handlers/block/blockClient.d.ts"
  name="getBlock"
>

```jsx
import { getBlock } from '@trikinco/fullstack-components'
```

</TypeInfoToText>

<TypeInfoToText
  path="handlers/block/fetchers.d.ts"
  name="fetchBlock"
>

```jsx
import { fetchBlock } from '@trikinco/fullstack-components/client'
```

</TypeInfoToText>

<TypeInfoToText
  path="handlers/block/fetchers.d.ts"
  name="fetchProcessedBlock"
>

```jsx
import { fetchProcessedBlock } from '@trikinco/fullstack-components/client'
```

</TypeInfoToText>
