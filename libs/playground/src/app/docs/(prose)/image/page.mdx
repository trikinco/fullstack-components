import { Image } from '@trikinco/fullstack-components'

export const metadata = {
  title: 'Image',
  description:
    'Create images with prompts or generate image descriptions.',
}

# Image

A smart image component that either describes a known image, generates an image based on a prompt, or behaves just like a regular `next/image`.

## Describing an image

<Image
  src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Felis_catus-cat_on_snow.jpg/179px-Felis_catus-cat_on_snow.jpg"
  showResult
  width={256}
  height={170}
/>

```jsx
import { Image } from '@trikinco/fullstack-components'
```

```jsx
<Image
  src="https://absolute-cat-url.jpg"
  width={256}
  height={170}
/>
```

## Generating an image

<Image prompt="A horse in outer space" />

```jsx
<Image prompt="A horse in outer space" />
```

## Standard `next/image`

<Image
  src="/images/MobiusStrip.png"
  alt="A white coiling mobius strip"
  width={300}
  height={300}
/>

```jsx
<Image
  src="/images/MobiusStrip.png"
  alt="A white coiling mobius strip"
  width={300}
  height={300}
/>
```

## `useImage`

`useImage` is a utility hook that allows for full access to the same features as `Image`.

```jsx
import { useImage } from '@trikinco/fullstack-components/client'
```

### Image description with `src`

```jsx
'use client'

import { useImage } from '@trikinco/fullstack-components/client'

export default function Page() {
  const { isLoading, isError, data } = useImage({
    src: 'https://absolute-cat-url.jpg',
  })

  if (isLoading) {
    return 'Describing image..."'
  }

  if (isError) {
    return 'Could not describe image'
  }

  return (
    <div className="rounded-md overflow-hidden p-6 bg-sky-200 text-sky-800 text-xl">
      {data}
    </div>
  )
}
```

### Image generation with `prompt`

```jsx
'use client'

import { useImage } from '@trikinco/fullstack-components/client'

export default function Page() {
  const { isLoading, isError, data } = useImage({
    prompt: 'A friendly smiling robot',
  })

  if (isLoading) {
    return 'Generating image..."'
  }

  if (isError) {
    return 'Could not generate image'
  }

  return (
    <img
      src={data}
      alt="A friendly smiling robot"
      width="256"
      height="256"
    />
  )
}
```

## Setup

1. Add the `handleImageRequest` to the [API handler route](/docs/get-started/#setup).

```ts title="app/api/fsutils/[...fscomponents]/route.ts"
import {
  handleFSComponents,
  handleImageRequest,
  type FSCOptions,
} from '@trikinco/fullstack-components'

const fscOptions: FSCOptions = {
  handleImage: handleImageRequest({
    openAiApiKey: process.env.OPENAI_API_KEY || '',
  }),
  // Additional options and handlers...
}

const fscHandler = handleFSComponents(fscOptions)

export { fscHandler as GET, fscHandler as POST }
```

2. Import and use the `Image` component.

```jsx
import { Image } from '@trikinco/fullstack-components'
```
