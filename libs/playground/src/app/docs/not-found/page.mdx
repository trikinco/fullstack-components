import { NotFoundEnhancer } from './NotFoundEnhancer'

export const metadata = {
  title: 'Not Found Enhancer',
  description:
    'AI-Powered Page Not Found. Get help finding the page you were looking for.',
}

# Not Found Enhancer

<NotFoundEnhancer />

This component uses your sitemap to find the closest matching page to the `not found` URL.
It also uses the contents of your website URL's to create a helpful message for your end-user.

## Setup

### Step 1: Configure the API handler

In the API handler file, you should add the following configuration to use this component.

**Not Found Enhancer requires configuration of the API handler.**

**Note:** not all features require configuration, so read the documentation for each.

```ts
export const POST = handleFSComponents({
  notFoundEnhancer: handleNotFoundEnhancement({
    siteUrl: process.env.SITE_URL || '', // used to inspect the sitemap
    openAiApiKey: process.env.OPENAI_API_KEY || '', // used to generate the contents
  }),
})
```

### Step 2: Create a new client component in your Next.js app

The key is to use the `useNotFoundEnhancement` hook to get the data from the API endpoint.

```tsx title="components/NotFoundEnhancer.tsx"
'use client'

import { useNotFoundEnhancement } from '@trikinco/fullstack-components/client'
import Link from 'next/link'

export function NotFoundEnhancer() {
  const { content, isLoading } = useNotFoundEnhancement()
  if (!content || isLoading) {
    return <p>Please wait, checking for other solutions...</p>
  }
  return (
    <div>
      <p>{content?.generatedContent}</p>
      <p>Try this url instead:</p>
      <div>
        <Link href={content?.bestAlternateUrl || '#'}>
          {content?.bestAlternateUrl || 'No alternate url found'}
        </Link>
      </div>
    </div>
  )
}
```

### Step 3: Create a `not-found` page

- Using the Next.js App Router: Create a [`not-found.tsx` page](https://nextjs.org/docs/app/api-reference/file-conventions/not-found) in your app.
- Using the Next.js Pages Router: [Create a `404.tsx` page](https://nextjs.org/docs/pages/building-your-application/routing/custom-error#404-page) in your app.

```tsx
// pages/404.tsx or app/not-found.tsx
import Link from 'next/link'

export default function NotFound() {
  return (
    <div>
      <h2>Not Found</h2>
      <p>Could not find requested resource</p>
      <Link href="/">Return Home</Link>
      <NotFoundEnhancer />
    </div>
  )
}
```
